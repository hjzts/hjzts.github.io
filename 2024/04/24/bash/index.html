<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="bash, C,Python,数分，高代，离散等">
    <meta name="description" content="shell script

时刻记住这是 一个脚本语言，一个更加彻底的解释型语言

Introduction
命令行最前面的例如git@22373058修改
PS1=&#34;$ &#34;; export PS1
Hello World脚本程序
$ ec">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>bash | hugo</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="hugo" type="application/atom+xml">
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">hugo</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">hugo</div>
        <div class="logo-desc">
            
            今天阳光正好
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/hjzts/hjzts.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/hjzts/hjzts.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/007.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">bash</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/bash/">
                                <span class="chip bg-color">bash</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Shell/" class="post-category">
                                Shell
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2024-04-24
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    2.3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    13 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        
        <!-- 代码块折行 -->
        <style type="text/css">
            code[class*="language-"], pre[class*="language-"] { white-space: pre-wrap !important; }
        </style>
        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1><span id="shell-script">shell script</span></h1>
<blockquote>
<p>时刻记住这是 一个脚本语言，一个更加彻底的解释型语言</p>
</blockquote>
<h3><span id="introduction">Introduction</span></h3>
<p>命令行最前面的例如<code>git@22373058</code>修改</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">"$ "</span><span class="token punctuation">;</span> <span class="token builtin class-name">export</span> <span class="token environment constant">PS1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Hello World脚本程序</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">echo</span> <span class="token string">'#!/bin/sh'</span> <span class="token operator">&gt;</span> my-script.sh
$ <span class="token builtin class-name">echo</span> <span class="token string">'echo Hello World'</span> <span class="token operator">&gt;&gt;</span> my-script.sh
$ <span class="token function">chmod</span> <span class="token number">755</span> my-script.sh
$ ./my-script.sh
Hello World<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="philosophy">Philosophy</span></h3>
<p>powerful echo!!</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token comment"># This is a comment!</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Hello      World"</span>       <span class="token comment"># This is a comment, too!</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Hello World"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Hello * World"</span>
<span class="token builtin class-name">echo</span> Hello * World
<span class="token builtin class-name">echo</span> Hello      World
<span class="token builtin class-name">echo</span> <span class="token string">"Hello"</span> World
<span class="token builtin class-name">echo</span> Hello <span class="token string">"     "</span> World
<span class="token builtin class-name">echo</span> <span class="token string">"Hello "</span>*<span class="token string">" World"</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span>hello<span class="token variable">`</span></span> world
<span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> world<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="variables">Variables</span></h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token assign-left variable">MY_MESSAGE</span><span class="token operator">=</span><span class="token string">"Hello World"</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$MY_MESSAGE</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Note that there must be no spaces around the “<code>=</code>” sign: <code>VAR=value</code> works; <code>VAR = value</code> doesn’t work. In the first case, the shell sees the “<code>=</code>” symbol and treats the command as a variable assignment. In the second case, the shell assumes that VAR must be the name of a command and tries to execute it.</p>
<p>这里必须要加引号，这是因为一个var只能有一个值</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">6</span>
$ <span class="token function">expr</span> <span class="token variable">$x</span>+1
<span class="token number">6</span>+1
$ <span class="token function">expr</span> <span class="token variable">$x</span> + <span class="token number">1</span>
<span class="token number">7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>program <code>expr</code> only expects numbers.因此这里的必须是数字</p>
<p>We can interactively set variable names using the <code>read</code> command.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">echo</span> What is your name?
<span class="token builtin class-name">read</span> MY_NAME
<span class="token builtin class-name">echo</span> <span class="token string">"Hello <span class="token variable">$MY_NAME</span> - hope you're well."</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>变量的作用域</p>
<ul>
<li>
<p>export</p>
</li>
<li>
<p>source 可以使用<code>.</code>来进行source</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cat</span> myvar2.sh
<span class="token comment">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">"MYVAR is <span class="token variable">$MYVAR</span>"</span>
<span class="token assign-left variable">MYVAR</span><span class="token operator">=</span><span class="token string">"hi there"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"MYVAR is <span class="token variable">$MYVAR</span>"</span>
$ <span class="token builtin class-name">.</span> ./myvar2.sh
MYVAR is hi there
MYVAR is hi there<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
<h3><span id="loops">Loops</span></h3>
<p>For Loops</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Looping ... number <span class="token variable">$i</span>"</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>While Loops</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token assign-left variable">INPUT_STRING</span><span class="token operator">=</span>hello
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$INPUT_STRING</span>"</span> <span class="token operator">!=</span> <span class="token string">"bye"</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Please type something in (bye to quit)"</span>
  <span class="token builtin class-name">read</span> INPUT_STRING
  <span class="token builtin class-name">echo</span> <span class="token string">"You typed: <span class="token variable">$INPUT_STRING</span>"</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意<code>[ ]</code>和中间的语句都要有空格隔开，因为需要把<code>[</code>理解为命令 <code>]</code>理解为参数，所以必须要加空格</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">while</span> <span class="token builtin class-name">:</span>
<span class="token keyword">do</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"please type something (^C to quit)"</span>
        <span class="token builtin class-name">read</span> INPUT_STRING
        <span class="token builtin class-name">echo</span> <span class="token string">"you typed : <span class="token variable">$INPUT_STRING</span>"</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意<code>while</code>后面就必须要有空格了</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> input_text
<span class="token keyword">do</span>
  <span class="token keyword">case</span> <span class="token variable">$input_text</span> <span class="token keyword">in</span>
        hello<span class="token punctuation">)</span>          <span class="token builtin class-name">echo</span> English    <span class="token punctuation">;</span><span class="token punctuation">;</span>
        howdy<span class="token punctuation">)</span>          <span class="token builtin class-name">echo</span> American   <span class="token punctuation">;</span><span class="token punctuation">;</span>
        gday<span class="token punctuation">)</span>           <span class="token builtin class-name">echo</span> Australian <span class="token punctuation">;</span><span class="token punctuation">;</span>
        bonjour<span class="token punctuation">)</span>        <span class="token builtin class-name">echo</span> French     <span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token string">"guten tag"</span><span class="token punctuation">)</span>    <span class="token builtin class-name">echo</span> German     <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span>              <span class="token builtin class-name">echo</span> Unknown Language: <span class="token variable">$input_text</span>
                <span class="token punctuation">;</span><span class="token punctuation">;</span>
   <span class="token keyword">esac</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> myfile.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这个是从<code>myfile.txt</code>作为输入流进行处理</p>
<p>A handy Bash (but not Bourne Shell) tip I learned recently from the <a target="_blank" rel="noopener" href="http://www.linuxfromscratch.org/">Linux From Scratch</a> project is:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> rc<span class="token punctuation">{</span><span class="token number">0,1</span>,2,3,4,5,6,S<span class="token punctuation">}</span>.d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>instead of the more cumbersome:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">runlevel</span> <span class="token keyword">in</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> S
<span class="token keyword">do</span>
  <span class="token function">mkdir</span> rc<span class="token variable">${runlevel}</span>.d
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>And this can be done recursively, too:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> /
$ <span class="token function">ls</span> <span class="token parameter variable">-ld</span> <span class="token punctuation">{</span>,usr,usr/local<span class="token punctuation">}</span>/<span class="token punctuation">{</span>bin,sbin,lib<span class="token punctuation">}</span>
drwxr-xr-x    <span class="token number">2</span> root     root         <span class="token number">4096</span> Oct <span class="token number">26</span> 01:00 /bin
drwxr-xr-x    <span class="token number">6</span> root     root         <span class="token number">4096</span> Jan <span class="token number">16</span> <span class="token number">17</span>:09 /lib
drwxr-xr-x    <span class="token number">2</span> root     root         <span class="token number">4096</span> Oct <span class="token number">27</span> 00:02 /sbin
drwxr-xr-x    <span class="token number">2</span> root     root        <span class="token number">40960</span> Jan <span class="token number">16</span> <span class="token number">19</span>:35 usr/bin
drwxr-xr-x   <span class="token number">83</span> root     root        <span class="token number">49152</span> Jan <span class="token number">16</span> <span class="token number">17</span>:23 usr/lib
drwxr-xr-x    <span class="token number">2</span> root     root         <span class="token number">4096</span> Jan <span class="token number">16</span> <span class="token number">22</span>:22 usr/local/bin
drwxr-xr-x    <span class="token number">3</span> root     root         <span class="token number">4096</span> Jan <span class="token number">16</span> <span class="token number">19</span>:17 usr/local/lib
drwxr-xr-x    <span class="token number">2</span> root     root         <span class="token number">4096</span> Dec <span class="token number">28</span> 00:44 usr/local/sbin
drwxr-xr-x    <span class="token number">2</span> root     root         <span class="token number">8192</span> Dec <span class="token number">27</span> 02:10 usr/sbin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="test">Test</span></h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">type</span> <span class="token punctuation">[</span>
<span class="token punctuation">[</span> 是 shell 内建
$ <span class="token function">which</span> <span class="token punctuation">[</span>
/usr/bin/<span class="token punctuation">[</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> /usr/bin/<span class="token punctuation">[</span>
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">51632</span>  <span class="token number">2</span>月  <span class="token number">8</span>  <span class="token number">2022</span> <span class="token string">'/usr/bin/['</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> /usr/bin/test
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">43440</span>  <span class="token number">2</span>月  <span class="token number">8</span>  <span class="token number">2022</span> /usr/bin/test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>This means that ‘<code>[</code>’ is actually a program, just like <code>ls</code> and other programs, so it must be surrounded by spaces:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token variable">$foo</span> <span class="token operator">=</span> <span class="token string">"bar"</span> <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>will not work; it is interpreted as <code>if test$foo = "bar" ]</code>, which is a ‘<code>]</code>’ without a beginning ‘<code>[</code>’. Put spaces around all your operators.</p>
<p>关于条件表达式</p>
<p>Some shells also accept “<code>==</code>” for string comparison; this is not portable, a single “<code>=</code>” should be used for strings, or “<code>-eq</code>” for integers.</p>
<p>The syntax for <code>if...then...else...</code> is:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token punctuation">..</span>. <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token comment"># if-code</span>
<span class="token keyword">else</span>
  <span class="token comment"># else-code</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Also, be aware of the syntax - the “<code>if [ ... ]</code>” and the “<code>then</code>” commands must be on different lines. Alternatively, the semicolon “<code>;</code>” can separate them:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token punctuation">..</span>. <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token comment"># do something</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>You can also use the <code>elif</code>, like this:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span>  <span class="token punctuation">[</span> something <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token builtin class-name">echo</span> <span class="token string">"Something"</span>
 <span class="token keyword">elif</span> <span class="token punctuation">[</span> something_else <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> <span class="token string">"Something else"</span>
 <span class="token keyword">else</span>
   <span class="token builtin class-name">echo</span> <span class="token string">"None of the above"</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>example</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token parameter variable">-lt</span> <span class="token string">"0"</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"X is less than zero"</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token parameter variable">-gt</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"X is more than zero"</span>
<span class="token keyword">fi</span>
<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token parameter variable">-le</span> <span class="token string">"0"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X is less than or equal to  zero"</span>
<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token parameter variable">-ge</span> <span class="token string">"0"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X is more than or equal to zero"</span>
<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X is the string or number <span class="token entity" title="\&quot;">\"</span>0<span class="token entity" title="\&quot;">\"</span>"</span>
<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token operator">=</span> <span class="token string">"hello"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X matches the string <span class="token entity" title="\&quot;">\"</span>hello<span class="token entity" title="\&quot;">\"</span>"</span>
<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token operator">!=</span> <span class="token string">"hello"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X is not the string <span class="token entity" title="\&quot;">\"</span>hello<span class="token entity" title="\&quot;">\"</span>"</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X is of nonzero length"</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X is the path of a real file"</span> <span class="token operator">||</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"No such file: <span class="token variable">$X</span>"</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X is the path of an executable file"</span>
<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token parameter variable">-nt</span> <span class="token string">"/etc/passwd"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
      <span class="token builtin class-name">echo</span> <span class="token string">"X is a file which is newer than /etc/passwd"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Note that we can use the semicolon (<code>;</code>) to join two lines together. This is often done to save a bit of space in simple <code>if</code> statements.<br>
The backslash (<code>\</code>) serves a similar, but opposite purpose: it tells the shell that this is not the end of the line, but that the following line should be treated as part of the current line. This is useful for readability. It is customary to indent the following line after a backslash (<code>\</code>) or semicolon (<code>;</code>).</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token assign-left variable">X</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token punctuation">]</span> <span class="token comment"># 表示X不为空</span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Enter some text (RETURN to quit)"</span>
  <span class="token builtin class-name">read</span> X
  <span class="token builtin class-name">echo</span> <span class="token string">"You said: <span class="token variable">$X</span>"</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Note that running this script will end untidily:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ ./test2.sh
Enter some text <span class="token punctuation">(</span>RETURN to quit<span class="token punctuation">)</span>
fred
You said: fred
Enter some text <span class="token punctuation">(</span>RETURN to quit<span class="token punctuation">)</span>
wilma
You said: wilma
Enter some text <span class="token punctuation">(</span>RETURN to quit<span class="token punctuation">)</span>

You said:
$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>This can be tidied up with another test within the loop:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token assign-left variable">X</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Enter some text (RETURN to quit)"</span>
  <span class="token builtin class-name">read</span> X
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$X</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"You said: <span class="token variable">$X</span>"</span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="case">Case</span></h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>

<span class="token builtin class-name">echo</span> <span class="token string">"Please talk to me ..."</span>
<span class="token keyword">while</span> <span class="token builtin class-name">:</span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">read</span> INPUT_STRING
  <span class="token keyword">case</span> <span class="token variable">$INPUT_STRING</span> <span class="token keyword">in</span>
	hello<span class="token punctuation">)</span>
		<span class="token builtin class-name">echo</span> <span class="token string">"Hello yourself!"</span>
		<span class="token punctuation">;</span><span class="token punctuation">;</span>
	bye<span class="token punctuation">)</span>
		<span class="token builtin class-name">echo</span> <span class="token string">"See you again!"</span>
		<span class="token builtin class-name">break</span>
		<span class="token punctuation">;</span><span class="token punctuation">;</span>
	*<span class="token punctuation">)</span>
		<span class="token builtin class-name">echo</span> <span class="token string">"Sorry, I don't understand"</span>
		<span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> 
<span class="token builtin class-name">echo</span> <span class="token string">"That's all folks!"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="variables-part2">Variables-Part2</span></h3>
<p>The first set of variables we will look at are <code>$0 .. $9</code> and <code>$#</code>.<br>
The variable <code>$0</code> is the <em>basename</em> of the program as it was called.<br>
<code>$1 .. $9</code> are the first 9 additional parameters the script was called with.<br>
The variable <code>$@</code> is all parameters <code>$1 .. whatever</code>. The variable <code>$*</code>, is similar, but does not preserve any whitespace, and quoting, so “File with spaces” becomes “File” “with” “spaces”. This is similar to the <code>echo</code> stuff we looked at in <a target="_blank" rel="noopener" href="https://www.shellscript.sh/first.html">A First Script</a>. As a general rule, use <code>$@</code> and avoid <code>$*</code>.<br>
<code>$#</code> is the number of parameters the script was called with.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">echo</span> <span class="token string">"I was called with <span class="token variable">$#</span> parameters"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"My name is <span class="token variable">$0</span>"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"My first parameter is <span class="token variable">$1</span>"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"My second parameter is <span class="token variable">$2</span>"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"All parameters are <span class="token variable">$@</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Another interesting variable is <code>IFS</code>. This is the <em>Internal Field Separator</em>. The default value is <code>SPACE TAB NEWLINE</code>, but if you are changing it, it’s easier to take a copy, as shown:</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://www.shellscript.sh/eg/var5.sh.txt">var5.sh</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token assign-left variable">old_IFS</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$IFS</span>"</span>
<span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span>:
<span class="token builtin class-name">echo</span> <span class="token string">"Please input some data separated by colons ..."</span>
<span class="token builtin class-name">read</span> x y z
<span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token variable">$old_IFS</span>
<span class="token builtin class-name">echo</span> <span class="token string">"x is <span class="token variable">$x</span> y is <span class="token variable">$y</span> z is <span class="token variable">$z</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<p>This script runs like this:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ ./ifs.sh
Please input some data separated by colons <span class="token punctuation">..</span>.
hello:how are you:today
x is hello y is how are you z is today<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Note that if you enter: “hello:how are you:today:my:friend” then the output would be:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ ./ifs.sh
Please input some data separated by colons <span class="token punctuation">..</span>.
hello:how are you:today:my:friend
x is hello y is how are you z is today:my:friend<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="function">Function</span></h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token comment"># A simple script with a function...</span>

<span class="token function-name function">add_a_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span><span class="token variable">$1</span>
  <span class="token assign-left variable">PASSWORD</span><span class="token operator">=</span><span class="token variable">$2</span>
  <span class="token builtin class-name">shift</span><span class="token punctuation">;</span> <span class="token builtin class-name">shift</span><span class="token punctuation">;</span>
  <span class="token comment"># Having shifted twice, the rest is now comments ...</span>
  <span class="token assign-left variable">COMMENTS</span><span class="token operator">=</span><span class="token variable">$@</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Adding user <span class="token environment constant">$USER</span> ..."</span>
  <span class="token builtin class-name">echo</span> <span class="token function">useradd</span> <span class="token parameter variable">-c</span> <span class="token string">"<span class="token variable">$COMMENTS</span>"</span> <span class="token environment constant">$USER</span>
  <span class="token builtin class-name">echo</span> <span class="token function">passwd</span> <span class="token environment constant">$USER</span> <span class="token variable">$PASSWORD</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Added user <span class="token environment constant">$USER</span> (<span class="token variable">$COMMENTS</span>) with pass <span class="token variable">$PASSWORD</span>"</span>
<span class="token punctuation">}</span>

<span class="token comment">###</span>
<span class="token comment"># Main body of script starts here</span>
<span class="token comment">###</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Start of script..."</span>
add_a_user bob letmein Bob Holness the presenter
add_a_user fred badpassword Fred Durst the singer
add_a_user bilko worsepassword Sgt. Bilko the role model
<span class="token builtin class-name">echo</span> <span class="token string">"End of script..."</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="recursion">Recursion</span></h2>
<p>Functions can be recursive - here’s a simple example of a factorial function:</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://www.shellscript.sh/eg/factorial.sh.txt">factorial.sh</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>

<span class="token function-name function">factorial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token parameter variable">-gt</span> <span class="token string">"1"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 - <span class="token number">1</span><span class="token variable">`</span></span>
    <span class="token assign-left variable">j</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>factorial $i<span class="token variable">`</span></span>
    <span class="token assign-left variable">k</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 <span class="token punctuation">\</span>* $j<span class="token variable">`</span></span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$k</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token number">1</span>
  <span class="token keyword">fi</span>
<span class="token punctuation">}</span>


<span class="token keyword">while</span> <span class="token builtin class-name">:</span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Enter a number:"</span>
  <span class="token builtin class-name">read</span> x
  factorial <span class="token variable">$x</span>
<span class="token keyword">done</span>                  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>As promised, we will now briefly discuss using libraries between shell scripts. These can also be used to define common variables, as we shall see.</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://www.shellscript.sh/eg/common.lib.txt">common.lib</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># common.lib</span>
<span class="token comment"># Note no #!/bin/sh as this should not spawn </span>
<span class="token comment"># an extra shell. It's not the end of the world </span>
<span class="token comment"># to have one, but clearer not to.</span>
<span class="token comment">#</span>
<span class="token assign-left variable">STD_MSG</span><span class="token operator">=</span><span class="token string">"About to rename some files..."</span>

<span class="token function-name function">rename</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment"># expects to be called as: rename .txt .bak </span>
  <span class="token assign-left variable">FROM</span><span class="token operator">=</span><span class="token variable">$1</span>
  <span class="token assign-left variable">TO</span><span class="token operator">=</span><span class="token variable">$2</span>

  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> *<span class="token variable">$FROM</span>
  <span class="token keyword">do</span>
    <span class="token assign-left variable">j</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">basename</span> $i $FROM<span class="token variable">`</span></span>
    <span class="token function">mv</span> <span class="token variable">$i</span> <span class="token variable">${j}</span><span class="token variable">$TO</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<p><a target="_blank" rel="noopener" href="https://www.shellscript.sh/eg/function2.sh.txt">function2.sh</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token comment"># function2.sh</span>
<span class="token builtin class-name">.</span> ./common.lib
<span class="token builtin class-name">echo</span> <span class="token variable">$STD_MSG</span>
<span class="token function">rename</span> .txt .bak<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<p><a target="_blank" rel="noopener" href="https://www.shellscript.sh/eg/function3.sh.txt">function3.sh</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token comment"># function3.sh</span>
<span class="token builtin class-name">.</span> ./common.lib
<span class="token builtin class-name">echo</span> <span class="token variable">$STD_MSG</span>
<span class="token function">rename</span> .html .html-bak<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="hints-and-tips">Hints and tips</span></h3>
<blockquote>
<p>You may have heard it said, that, with *nix, “everything is a file” - it’s true.</p>
</blockquote>
<ul>
<li>强大的文本分析工具</li>
</ul>
<p><strong><code>grep</code></strong></p>
<p><strong><code>wc</code></strong> &amp;&amp; <strong><code>awk</code></strong></p>
<p>Consider <code>wc</code>, which counts the number of characters, lines, and words in a text file. Its output is:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">wc</span> hello.c
<span class="token number">5</span>  <span class="token number">8</span> <span class="token number">67</span> hello.c<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>If we want to get the number of lines into a variable, simply using:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token assign-left variable">NO_LINES</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">wc</span> <span class="token parameter variable">-l</span> hello.c<span class="token variable">`</span></span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$NO_LINES</span>
<span class="token number">5</span> hello.c<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Because the output is space-padded, we can’t reliably get the number <code>102</code> into the string. Instead, we use the fact that <code>awk</code> works similarly to <code>scanf</code> in C - it strips unwanted whitespace. It puts these into variables <code>$1 $2 $3</code> etc. So we use this construct:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token assign-left variable">NO_LINES</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">wc</span> <span class="token parameter variable">-l</span> hello.c <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ print $1 }'</span> <span class="token variable">`</span></span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$NO_LINES</span>
<span class="token number">5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong><code>sed</code></strong></p>
<p>we can quickly use the <code>s/from/to/g</code> construct by invoking <code>sed</code>.For example:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sed</span> s/eth0/eth1/g file1 <span class="token operator">&gt;</span>  file2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>changes every instance of <code>eth0</code> in file1 to <code>eth1</code> in file2.</p>
<p>If we were only changing a single character, <code>tr</code> would be the tool to use, being smaller and therefore faster to load.<br>
Another thing that <code>tr</code> can’t do, is remove characters from a file:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token variable">${SOMETHING}</span> <span class="token operator">|</span> <span class="token function">sed</span> s/<span class="token string">"bad word"</span>//g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>This removes the phrase “bad word” from the variable <code>${SOMETHING}</code>. It may be tempting to say, “But <code>grep</code> can do that!” - grep only deals with whole lines. Consider the file:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">This line is okay.
This line contains a bad word. Treat with care.
This line is fine, too.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Grep would remove the whole second line, leaving only a two-line file; sed would change the file to read:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">This line is okay.
This line contains a <span class="token builtin class-name">.</span> Treat with care.
This line is fine, too.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3><span id="quick-referrence">quick referrence</span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>Run the previous command in the background</td>
<td><code>ls &amp;</code></td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>Logical AND</td>
<td><code>if [ "$foo" -ge "0" ] &amp;&amp; [ "$foo" -le "9"]</code></td>
</tr>
<tr>
<td>||</td>
<td>Logical OR</td>
<td>`if [ “$foo” -lt “0” ]</td>
</tr>
<tr>
<td>^</td>
<td>Start of line</td>
<td><code>grep "^foo"</code></td>
</tr>
<tr>
<td>$</td>
<td>End of line</td>
<td><code>grep "foo$"</code></td>
</tr>
<tr>
<td>=</td>
<td>String equality (cf. -eq)</td>
<td><code>if [ "$foo" = "bar" ]</code></td>
</tr>
<tr>
<td>!</td>
<td>Logical NOT</td>
<td><code>if [ "$foo" != "bar" ]</code></td>
</tr>
<tr>
<td>$$</td>
<td>PID of current shell</td>
<td><code>echo "my PID = $$"</code></td>
</tr>
<tr>
<td>$!</td>
<td>PID of last background command</td>
<td><code>ls &amp; echo "PID of ls = $!"</code></td>
</tr>
<tr>
<td>$?</td>
<td>exit status of last command</td>
<td><code>ls ; echo "ls returned code $?"</code></td>
</tr>
<tr>
<td>$0</td>
<td>Name of current command (as called)</td>
<td><code>echo "I am $0"</code></td>
</tr>
<tr>
<td>$1</td>
<td>Name of current command’s first parameter</td>
<td><code>echo "My first argument is $1"</code></td>
</tr>
<tr>
<td>$9</td>
<td>Name of current command’s ninth parameter</td>
<td><code>echo "My ninth argument is $9"</code></td>
</tr>
<tr>
<td>$@</td>
<td>All of current command’s parameters (preserving whitespace and quoting)</td>
<td><code>echo "My arguments are $@"</code></td>
</tr>
<tr>
<td>$*</td>
<td>All of current command’s parameters (not preserving whitespace and quoting)</td>
<td><code>echo "My arguments are $*"</code></td>
</tr>
<tr>
<td>-eq</td>
<td>Numeric Equality</td>
<td><code>if [ "$foo" -eq "9" ]</code></td>
</tr>
<tr>
<td>-ne</td>
<td>Numeric Inquality</td>
<td><code>if [ "$foo" -ne "9" ]</code></td>
</tr>
<tr>
<td>-lt</td>
<td>Less Than</td>
<td><code>if [ "$foo" -lt "9" ]</code></td>
</tr>
<tr>
<td>-le</td>
<td>Less Than or Equal</td>
<td><code>if [ "$foo" -le "9" ]</code></td>
</tr>
<tr>
<td>-gt</td>
<td>Greater Than</td>
<td><code>if [ "$foo" -gt "9" ]</code></td>
</tr>
<tr>
<td>-ge</td>
<td>Greater Than or Equal</td>
<td><code>if [ "$foo" -ge "9" ]</code></td>
</tr>
<tr>
<td>-z</td>
<td>String is zero length</td>
<td><code>if [ -z "$foo" ]</code></td>
</tr>
<tr>
<td>-n</td>
<td>String is not zero length</td>
<td><code>if [ -n "$foo" ]</code></td>
</tr>
<tr>
<td>-nt</td>
<td>Newer Than</td>
<td><code>if [ "$file1" -nt "$file2" ]</code></td>
</tr>
<tr>
<td>-d</td>
<td>Is a Directory</td>
<td><code>if [ -d /bin ]</code></td>
</tr>
<tr>
<td>-f</td>
<td>Is a File</td>
<td><code>if [ -f /bin/ls ]</code></td>
</tr>
<tr>
<td>-r</td>
<td>Is a readable file</td>
<td><code>if [ -r /bin/ls ]</code></td>
</tr>
<tr>
<td>-w</td>
<td>Is a writable file</td>
<td><code>if [ -w /bin/ls ]</code></td>
</tr>
<tr>
<td>-x</td>
<td>Is an executable file</td>
<td><code>if [ -x /bin/ls ]</code></td>
</tr>
<tr>
<td>( … )</td>
<td>Function definition</td>
<td><code>function myfunc() { echo hello }</code></td>
</tr>
</tbody>
</table>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">hugo</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://hugohealthy.top/2024/04/24/bash/">https://hugohealthy.top/2024/04/24/bash/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">hugo</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/bash/">
                                    <span class="chip bg-color">bash</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    
        <div class="disqus-card card" data-aos="fade-up">
    <div id="disqus_thread" class="card-content">
        <noscript>Please enable JavaScript to view the
            <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
    </div>
</div>

<script type="text/javascript">
    disqus_config = function () {
        this.page.url = 'https://hugohealthy.top/2024/04/24/bash/';
        this.page.identifier = '/2024/04/24/bash/';
        this.page.title = 'bash';
    };
    let disqus_shortname = '';

    (function () { // DON'T EDIT BELOW THIS LINE
        let d = document, s = d.createElement('script');
        // 如：s.src = 'https://blinkfox.disqus.com/embed.js';
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2024/04/24/mariadb/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/013.jpg" class="responsive-img" alt="mariadb">
                        
                        <span class="card-title">mariadb</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2024-04-24
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-category">
                                    数据库
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/mariadb%E5%8D%87%E7%BA%A7/">
                        <span class="chip bg-color">mariadb升级</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2024/04/24/debian12/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/001.jpg" class="responsive-img" alt="debian12">
                        
                        <span class="card-title">debian12</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2024-04-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Linux/" class="post-category">
                                    Linux
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/debian12/">
                        <span class="chip bg-color">debian12</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: hugo<br />'
            + '文章作者: hugo<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '这里是hugo。本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="tencent"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2023-2024</span>
            
            <a href="/about" target="_blank">hugo</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">92.1k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:3376467972@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=3376467972" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 3376467972" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>









    <a href="https://i.328888.xyz/2023/04/10/imVT4z.jpeg" class="tooltipped" target="_blank" data-tooltip="微信联系我: https://i.328888.xyz/2023/04/10/imVT4z.jpeg" data-position="top" data-delay="50">
        <i class="fab fa-weixin"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    
        <!-- <script src='https://unpkg.com/mermaid@latest/dist/mermaid.min.js'></script> -->
        <script src='/libs/mermaid/mermaid.min.js'></script>
        <script>
          if (window.mermaid) {
            mermaid.initialize({theme: 'forest'});
          }
        </script>
    

    
    
    
        
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/sakura.js"><\/script>');
            }
        </script>
    

    <!-- 雪花特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/snow.js"><\/script>');
            }
        </script>
    

    <!-- 鼠标星星特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/star.js"><\/script>');
            }
        </script>
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    
    <script type="text/javascript" color="0,20,255"
        pointColor="40,50,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    
    
    <script type="text/javascript" size="90" alpha='0.9'
        zIndex="-1" src="/libs/background/ribbon.min.js" async="async"></script>
    

    

    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body>

</html>
